â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  INTEGRACIÃ“N DE IMPRESORA TÃ‰RMICA ESC/POS                       â•‘
â•‘                        HTF GIMNASIO POS - DICIEMBRE 2025                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ESTADO: INTEGRACIÃ“N COMPLETADA Y LISTA PARA USAR                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ COMPONENTES INSTALADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. escpos_printer.py
   â”œâ”€ EscPosDriver (Clase base)
   â”‚  â”œâ”€ conectar()
   â”‚  â”œâ”€ desconectar()
   â”‚  â”œâ”€ enviar_comando()
   â”‚  â”œâ”€ alineaciÃ³n (centro, izquierda, derecha)
   â”‚  â”œâ”€ estilos (negrita, tamaÃ±os)
   â”‚  â”œâ”€ cortar_papel()
   â”‚  â””â”€ abrir_caja_registradora()
   â”‚
   â””â”€ TicketPrinter (Especializada)
      â”œâ”€ imprimir_titulo_tienda()
      â”œâ”€ imprimir_encabezado_ticket()
      â”œâ”€ imprimir_producto()
      â”œâ”€ imprimir_total()
      â”œâ”€ imprimir_pie()
      â””â”€ imprimir_ticket(datos)  â† Main

2. config_impresora.py
   â”œâ”€ ConfiguradorImpresora
   â”‚  â”œâ”€ cargar_config()
   â”‚  â”œâ”€ guardar_config()
   â”‚  â”œâ”€ obtener_puertos_disponibles()
   â”‚  â””â”€ probar_conexion()
   â”‚
   â””â”€ config_impresora.json (generado automÃ¡ticamente)

3. test_impresora.py
   â”œâ”€ MenÃº interactivo
   â”œâ”€ Detectar puertos COM
   â”œâ”€ Probar conexiÃ³n
   â”œâ”€ Imprimir ticket de prueba
   â””â”€ Diagnosticar problemas

4. Modificaciones en ui/ventas/nueva_venta.py
   â””â”€ Nuevo botÃ³n: "Imprimir TÃ©rmica"
   â””â”€ Nuevo mÃ©todo: imprimir_ticket_escpos()

ğŸ”§ CONFIGURACIÃ“N ACTUAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Puerto COM:          COM3
Velocidad (baud):    115200
Timeout:             2.0 segundos
Tienda:              HTF GIMNASIO
SubtÃ­tulo:           PUNTO DE VENTA
Abrir caja:          AutomÃ¡tico âœ“
Cortar papel:        AutomÃ¡tico âœ“

ğŸš€ FLUJO DE USO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USUARIO REALIZA VENTA                                        â”‚
â”‚    - Escanea o busca productos                                  â”‚
â”‚    - Agrega al carrito                                          â”‚
â”‚    - Define cantidad y confirma                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. FINALIZAR VENTA                                              â”‚
â”‚    - Presiona botÃ³n "Pagar" o "Finalizar"                       â”‚
â”‚    - Sistema registra la venta                                  â”‚
â”‚    - Se abre diÃ¡logo de ticket                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. DIÃLOGO DE TICKET CON 3 OPCIONES                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Ticket #001234                      â”‚                        â”‚
â”‚  â”‚ 19/12/2025 15:30                    â”‚                        â”‚
â”‚  â”‚ ...                                 â”‚                        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚
â”‚  â”‚ [ğŸ–¨ï¸  Imprimir TÃ©rmica]             â”‚ â† ESC/POS             â”‚
â”‚  â”‚ [ğŸ–¨ï¸  Imprimir Sistema]             â”‚ â† Windows             â”‚
â”‚  â”‚ [âŒ Cerrar]                        â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                 â”‚
â”‚ OpciÃ³n A: Usuario presiona "Imprimir TÃ©rmica"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. PROCESO DE IMPRESIÃ“N ESC/POS                                 â”‚
â”‚                                                                 â”‚
â”‚  imprimir_ticket_escpos()                                       â”‚
â”‚   â”œâ”€ Conecta a puerto COM3                                      â”‚
â”‚   â”œâ”€ Inicializa impresora                                       â”‚
â”‚   â”œâ”€ Prepara datos del ticket                                   â”‚
â”‚   â”œâ”€ Formatea y envÃ­a:                                          â”‚
â”‚   â”‚  â”œâ”€ TÃ­tulo (HTF GIMNASIO)                                  â”‚
â”‚   â”‚  â”œâ”€ Encabezado (#001234, Fecha, Cajero)                    â”‚
â”‚   â”‚  â”œâ”€ Productos                                              â”‚
â”‚   â”‚  â”œâ”€ Total                                                  â”‚
â”‚   â”‚  â””â”€ Pie (Gracias, Vuelva pronto)                           â”‚
â”‚   â”œâ”€ Abre caja registradora (12V)                              â”‚
â”‚   â”œâ”€ Corta papel automÃ¡tico                                     â”‚
â”‚   â”œâ”€ Desconecta impresora                                      â”‚
â”‚   â””â”€ Muestra mensaje de Ã©xito                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. RESULTADO                                                    â”‚
â”‚    [IMPRESORA TÃ‰RMICA]                                          â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚         HTF GIMNASIO                                            â”‚
â”‚        PUNTO DE VENTA                                           â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚    Ticket: #001234                                              â”‚
â”‚    Fecha: 19/12/2025 15:30                                      â”‚
â”‚    Cajero: Juan PÃ©rez                                           â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚    Bebida EnergÃ©tica                                            â”‚
â”‚      2 x $5.00        $10.00                                     â”‚
â”‚    Toalla Microfibra                                            â”‚
â”‚      1 x $15.00       $15.00                                     â”‚
â”‚    Shaker Botella                                               â”‚
â”‚      1 x $8.50        $8.50                                      â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚              TOTAL:    $33.50                                    â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚         PAGO EFECTIVO                                           â”‚
â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚    Â¡Gracias por su compra!                                      â”‚
â”‚       Vuelva pronto                                             â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚                                                                 â”‚
â”‚    [CAJA REGISTRADORA SE ABRE]                                 â”‚
â”‚    [PAPEL SE CORTA AUTOMÃTICAMENTE]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ§ª PRUEBAS ANTES DE USAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJECUTAR ESTOS COMANDOS:

1. Detectar puertos:
   $ python test_impresora.py
   Seleccionar opciÃ³n 1

2. Probar conexiÃ³n:
   $ python test_impresora.py
   Seleccionar opciÃ³n 2
   Ingresar puerto (ej: COM3)

3. Imprimir ticket de prueba:
   $ python test_impresora.py
   Seleccionar opciÃ³n 3
   Ingresar puerto (ej: COM3)

4. Ejecutar todas las pruebas:
   $ python test_impresora.py
   Seleccionar opciÃ³n 4 â† RECOMENDADO

ğŸ“‹ IMPRESORA SOPORTADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Modelo:           EC-PM-58110-USB
Fabricante:       EC Line
Protocolo:        ESC/POS
Ancho papel:      58mm (42 caracteres)
Velocidad impre:  110mm/seg
Interfaz:         Serial + USB
AlimentaciÃ³n:     12V âš¡
Caja registrador: SÃ­, conectada a 12V

COMPATIBLE CON: Epson, Star Micronics, Zebra y similares ESC/POS

âš ï¸  REQUERIMIENTOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Python 3.8+
âœ“ pyserial (instalado)
âœ“ PySide6 (para UI)
âœ“ Drivers de impresora EC-PM-58110 (descargar de fabricante)
âœ“ Cable USB A a B
âœ“ Impresora conectada y encendida

INSTALAR DRIVERS: https://ecline.com.br/ o buscar "EC-PM-58110-USB driver"

ğŸ”— CONEXIÃ“N FÃSICA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Impresora USB â”€â”€â”€â”€ Cable USB â”€â”€â”€â”€ Computadora (Puerto USB)
Caja Registr. â”€â”€â”€â”€ Cable 12V â”€â”€â”€â”€ Fuente de poder (12V)

Verificar en:
1. Windows Device Manager â†’ Puertos (COM y LPT)
2. O ejecutar: python test_impresora.py â†’ OpciÃ³n 1

ğŸ’¾ ARCHIVOS GENERADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

config_impresora.json (automÃ¡tico despuÃ©s de primera ejecuciÃ³n)
migracion_supabase.log (si migraciÃ³n se ejecuta)
pos_htf.log (logs del sistema)

â“ PREGUNTAS FRECUENTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

P: Â¿DÃ³nde estÃ¡ el puerto COM de mi impresora?
R: Ejecuta test_impresora.py opciÃ³n 1, o abre Administrador de dispositivos

P: Â¿Puedo usar otra impresora ESC/POS?
R: SÃ­, cualquier impresora ESC/POS es compatible. Solo cambia el puerto COM

P: Â¿QuÃ© pasa si no tengo caja registradora?
R: Funciona normalmente. Solo desactiva "abrir_caja" en config_impresora.json

P: Â¿Se puede imprimir sin cortar papel?
R: SÃ­, cambia "cortar_papel_automaticamente": false en config_impresora.json

P: Â¿Funciona en Mac/Linux?
R: SÃ­, el cÃ³digo es multiplataforma. Solo ajusta los puertos (ttyUSB0, etc.)

P: Â¿QuÃ© hago si dice "timeout"?
R: Aumenta timeout_conexion en config_impresora.json (prueba 3.0 Ã³ 4.0)

ğŸ¯ PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Instala drivers de EC-PM-58110
2. âœ… Conecta impresora por USB
3. âœ… Ejecuta: python test_impresora.py (opciÃ³n 4)
4. âœ… Si todo dice âœ…, comienza a usar
5. â“ Cualquier error, ejecuta test_impresora.py para diagnÃ³stico

ğŸ“ SOPORTE TÃ‰CNICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Script de diagnÃ³stico:    python test_impresora.py
DocumentaciÃ³n completa:   INTEGRACION_IMPRESORA_ESCPOS.md
Logs del sistema:         pos_htf.log

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        âœ¨ Â¡LISTO PARA USAR! âœ¨                               â•‘
â•‘                                                                                â•‘
â•‘              Impresora tÃ©rmica integrada en ventana de ventas                  â•‘
â•‘               AutomÃ¡tico: Abre caja + Corta papel + Cierre                    â•‘
â•‘                                                                                â•‘
â•‘                 Cualquier duda â†’ python test_impresora.py                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
